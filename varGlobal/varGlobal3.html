<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Var Global 3</title>
</head>

<body>

    <h1>Var Global 2</h1>

    <div id="resul_guardar">
        <p style="color:blue">
            Total guardado no cofrinho: R$ <span id="span_cofre">0</span> <br>
            Depósitos efetuados: <span id="span_depositos">0</span> <br>
            Retiradas efetuadas: <span id="span_retiradas">0</span> <br>
        </p>

        <h1>Deposite clicando nos botões</H1>
        <div id="div_botoes">
            <button onclick="btn_depositar()">Depositar 0,50</button> <br>
            <button onclick="btn_depositarTwo()">Depositar 2,00</button> <br>
            <button onclick="btn_retirar()">Retirar 0,50</button> <br>
            <button onclick="desfazer()">Desfazer</button> <br>
            <br>
        </div>

        Quanto você deseja retirar?
        <input id="input_retirar"> <br>
        <button onclick="btn_retirarTudo()">Retirar</button> <br>
    </div>
    <br>
    <br>
</body>

</html>

<script>
    var depositos = 0;
    var retiradas = 0;
    var contadorDep = 0;
    var contadorRet = 0;


    function btn_depositar() {
        depositos = depositos + 0.50;
        contadorDep += 1;

        span_cofre.innerHTML = depositos;
        span_depositos.innerHTML = contadorDep;
    }

    function btn_depositarTwo() {
        depositos = depositos + 2.00;
        contadorDep += 1;

        span_cofre.innerHTML = depositos;
        span_depositos.innerHTML = contadorDep;
    }

    function btn_retirar() {
        depositos = depositos - 0.50;
        contadorRet += 1;

        span_cofre.innerHTML = depositos;
        span_retiradas.innerHTML = contadorRet;
    }

    function btn_retirarTudo() {
        var retirar = input_retirar.value;
        depositos = depositos - retirar;
        contadorRet += 1;

        span_cofre.innerHTML = depositos;
        span_retiradas.innerHTML = contadorRet;
    }

    function desfazer() {
        var desfNumber = depositos;

        if (desfNumber.len) {
            depositos = depositos - 0.50;
            contadorDep -= 1;

            span_cofre.innerHTML = depositos;
            span_depositos.innerHTML = contadorDep;
        } else {
            alert("Não há mais depósitos para desfazer");
        }

        if (desfNumber > 0) {
            depositos = depositos - 2.00;
            contadorDep -= 1;

            span_cofre.innerHTML = depositos;
            span_depositos.innerHTML = contadorDep;
        } else {
            alert("Não há mais depósitos para desfazer");
        }

    }
</script>